<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="UTF-8">
    <title>&lt;ax-comments&gt; element by adanski</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
          integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w=="
          crossorigin="anonymous"
          referrerpolicy="no-referrer" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/a11y-dark.min.css"
          title="dark">
    <link rel="alternate stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/vs.min.css"
          disabled="disabled"
          title="light">
    <link rel="stylesheet" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" href="stylesheets/custom.css" media="screen">
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-41980270-4', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
    </script>

    <!-- CSS Modules polyfill necessary for Firefox -->
    <script>
        esmsInitOptions = {
            shimMode: false,
            polyfillEnable: ['css-modules', 'json-modules']
        }
    </script>
    <script async src="https://ga.jspm.io/npm:es-module-shims@1.6.2/dist/es-module-shims.js"></script>

    <script type="importmap">
        {
            "imports": {
                "highlight.js/lib/core": "https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/es/core.min.js",
                "highlight.js/lib/languages/bash": "https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/es/languages/bash.min.js",
                "highlight.js/lib/languages/javascript": "https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/es/languages/javascript.min.js",
                "highlight.js/lib/languages/typescript": "https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.7.0/build/es/languages/typescript.min.js"
            }
        }
    </script>

    <script async type="module" src="sidebar.js"></script>
    <script async type="module" src="code-highlighter.js"></script>
    <script type="module">
        document.querySelector('#toggle-mode').onclick = function () {
            document.body.classList.toggle('dark-mode');
            const lightStyle = document.querySelector('link[title="light"]');
            lightStyle.disabled = !lightStyle.disabled;
            const darkStyle = document.querySelector('link[title="dark"]');
            darkStyle.disabled = !darkStyle.disabled;
        };
    </script>
</head>
<body class="dark-mode">
<section class="page-header">
    <button type="button"
            id="toggle-mode"
            class="btn"
            style="float:right;padding:0.2rem;">
        üåû/üåô
    </button>
    <h1 class="project-name">ax-comments</h1>
    <h2 class="project-tagline">The TypeScript library of choice for implementing commenting in your web app</h2>
    <a href="https://github.com/adanski/ax-comments" class="btn">View on GitHub</a>
    <a href="https://github.com/adanski/ax-comments/zipball/master" class="btn">Download .zip</a>
    <a href="https://github.com/adanski/ax-comments/tarball/master" class="btn">Download .tar.gz</a>
</section>

<section class="main-content">

    <div class="sidebar"></div>

    <main class="content">

        <h1>
            ax-comments
        </h1>

        <p>
            &lt;ax-comments&gt; is a standalone web component with minimal set of dependencies (no jQuery!)
            for implementing an out-of-the-box commenting solution to any web application with an existing backend.
            It provides all the UI functionalities and ties them to callbacks that let you easily define
            what you want to do with the data. The library is highly customizable and very easy to integrate
            thanks to a wide variety of settings.
        </p>

        <p><img src="https://github.com/adanski/ax-comments/blob/master/screenshot.png?raw=true"
                alt="Screenshot of ax-comments" title="Screenshot of ax-comments"></p>

        <h3 id="features">
            <a class="anchor octicon" href="#features" aria-hidden="true">
                <object class="octicon-link" type="image/svg+xml" data="stylesheets/link.svg"></object>
            </a>
            Features
        </h3>

        <ul>
            <li>Commenting</li>
            <li>Replying (nested comments)</li>
            <li>Editing comments</li>
            <li>Deleting comments</li>
            <li>Upvoting comments</li>
            <li>Uploading attachments</li>
            <li>Hashtags</li>
            <li>Pinging users</li>
            <li>Enabling/disabling functionalities</li>
            <li>Localization</li>
            <li>Time formatting</li>
            <li>Callbacks</li>
            <li>Fully responsive and mobile compatible</li>
            <li>Miscellaneous settings</li>
        </ul>

        <h3 id="demo">
            <a class="anchor octicon" href="#demo" aria-hidden="true">
                <object class="octicon-link" type="image/svg+xml" data="stylesheets/link.svg"></object>
            </a>
            Demo
        </h3>

        <p><a href="https://adanski.github.io/ax-comments/demo/">https://adanski.github.io/ax-comments/demo/</a></p>

        <h3 id="quick-start">
            <a  class="anchor octicon" href="#quick-start" aria-hidden="true">
                <object class="octicon-link" type="image/svg+xml" data="stylesheets/link.svg"></object>
            </a>
            Quick start
        </h3>

        <p><strong>1. Installation</strong></p>

        <pre><code class="language-bash">$ npm install --save ax-comments</code></pre>

        <p><strong>2. Usage</strong></p>

        <pre><code class="language-javascript">import 'ax-comments/comments-element';

//...

const commentsElement = document.createElement('ax-comments');
commentsElement.options = {
    // ...
    getComments: (onSuccess, onError) => {
        const commentsArray = [{
            id: '1',
            content: "Lorem ipsum dolor sit amet",
            creatorUserId: "simon.powell",
            creatorDisplayName: "Simon Powell",
            // ...
            createdByAdmin: false,
            createdByCurrentUser: false,
            upvoteCount: 3,
            upvotedByCurrentUser: false,
            isNew: false
        }];
        onSuccess(commentsArray);
    },
    // ...
};

document.body.append(commentsElement);</code></pre>

        <p>See full example <a href="https://github.com/adanski/ax-comments/blob/gh-pages/demo/demo.js">here</a>.</p>

        <p>If you are not using Font Awesome for icons, you should replace the icons with custom images by overriding
            following options when initializing the library:</p>

        <pre><code class="language-javascript">spinnerIconURL: '',
noCommentsIconURL: '',
closeIconURL: '',
upvoteIconURL: '',      // Only if upvoting is enabled
replyIconURL: '',       // Only if replying is enabled
uploadIconURL: '',      // Only if attachments are enabled
attachmentIconURL: '',  // Only if attachments are enabled</code></pre>

        <h3 id="example-data">
            <a class="anchor octicon" href="#example-data" aria-hidden="true">
                <object class="octicon-link" type="image/svg+xml" data="stylesheets/link.svg"></object>
            </a>
            Example data
        </h3>
        <p>The library expects the comment (and attachment) data to be provided with the structure demonstrated below.
            If your internal structure differs then the comments should be transformed to match
            &lt;ax-comments&gt;'s structure defined in <code>models.ts</code></p>

        <pre><code class="language-javascript">{
    id: '2',
    parentId: null,
    createdAt: new Date('2016-01-02 00:32'),
    content: 'Sed posuere interdum sem. Quisque ligula eros ullamcorper quis, lacinia quis facilisis sed sapien. Mauris varius diam vitae arcu.',
    attachments: [],
    pings: {},
    creatorUserId: 'administrator',
    creatorDisplayName: 'Administrator',
    creatorProfilePictureURL: 'https://i.pravatar.cc/100?img=49',
    createdByAdmin: true,
    createdByCurrentUser: false,
    upvoteCount: 2,
    upvotedByCurrentUser: false,
    isNew: false
}</code></pre>

        <h3 id="configuration-options">
            <a class="anchor octicon" href="#configuration-options" aria-hidden="true">
                <object class="octicon-link" type="image/svg+xml" data="stylesheets/link.svg"></object>
            </a>
            Configuration options
        </h3>

        <p class="configuration-options-linkable" id="current-user-options"><strong>Current user</strong></p>

        <pre class="source-with-footer"><code class="language-typescript current-user">
            <!-- Dynamically replaced placeholder -->
            https://github.com/adanski/ax-comments/blob/master/src/options/current-user.ts
        </code></pre>
        <div class="source-footer">
            <a target="_blank" href="https://github.com/adanski/ax-comments/blob/master/src/options/current-user.ts">src/options/current-user.ts</a>
            delivered <span class="hide-in-phone">with ‚ù§</span>.
            <a target="_blank"
               href="https://raw.githubusercontent.com/adanski/ax-comments/master/src/options/current-user.ts"
               style="float:right">view raw</a>
        </div>

        <p class="configuration-options-linkable" id="icons-options"><strong>Icons</strong></p>

        <pre class="source-with-footer"><code class="language-typescript icons">
            <!-- Dynamically replaced placeholder -->
            https://github.com/adanski/ax-comments/blob/master/src/options/icons.ts
        </code></pre>
        <div class="source-footer">
            <a target="_blank" href="https://github.com/adanski/ax-comments/blob/master/src/options/icons.ts">src/options/icons.ts</a>
            delivered <span class="hide-in-phone">with ‚ù§</span>.
            <a target="_blank" href="https://raw.githubusercontent.com/adanski/ax-comments/master/src/options/icons.ts"
               style="float:right">view raw</a>
        </div>

        <p class="configuration-options-linkable" id="labels-options"><strong>Labels</strong></p>

        <pre class="source-with-footer"><code class="language-typescript labels">
            <!-- Dynamically replaced placeholder -->
            https://github.com/adanski/ax-comments/blob/master/src/options/labels.ts
        </code></pre>
        <div class="source-footer">
            <a target="_blank" href="https://github.com/adanski/ax-comments/blob/master/src/options/labels.ts">src/options/labels.ts</a>
            delivered <span class="hide-in-phone">with ‚ù§</span>.
            <a target="_blank" href="https://raw.githubusercontent.com/adanski/ax-comments/master/src/options/labels.ts"
               style="float:right">view raw</a>
        </div>

        <p class="configuration-options-linkable" id="functionalities-options"><strong>Functionalities</strong></p>

        <pre class="source-with-footer"><code class="language-typescript functionalities">
            <!-- Dynamically replaced placeholder -->
            https://github.com/adanski/ax-comments/blob/master/src/options/functionalities.ts
        </code></pre>
        <div class="source-footer">
            <a target="_blank" href="https://github.com/adanski/ax-comments/blob/master/src/options/labels.ts">src/options/labels.ts</a>
            delivered <span class="hide-in-phone">with ‚ù§</span>.
            <a target="_blank" href="https://raw.githubusercontent.com/adanski/ax-comments/master/src/options/labels.ts"
               style="float:right">view raw</a>
        </div>

        <p class="configuration-options-linkable" id="models-options"><strong>Models</strong></p>

        <pre class="source-with-footer"><code class="language-typescript models">
            <!-- Dynamically replaced placeholder -->
            https://github.com/adanski/ax-comments/blob/master/src/options/models.ts
        </code></pre>
        <div class="source-footer">
            <a target="_blank" href="https://github.com/adanski/ax-comments/blob/master/src/options/models.ts">src/options/models.ts</a>
            delivered <span class="hide-in-phone">with ‚ù§</span>.
            <a target="_blank" href="https://raw.githubusercontent.com/adanski/ax-comments/master/src/options/models.ts"
               style="float:right">view raw</a>
        </div>

        <p class="configuration-options-linkable" id="callbacks-options"><strong>Callbacks</strong></p>

        <pre class="source-with-footer"><code class="language-typescript callbacks">
            <!-- Dynamically replaced placeholder -->
            https://github.com/adanski/ax-comments/blob/master/src/options/callbacks.ts
        </code></pre>
        <div class="source-footer">
            <a target="_blank" href="https://github.com/adanski/ax-comments/blob/master/src/options/callbacks.ts">src/options/callbacks.ts</a>
            delivered <span class="hide-in-phone">with ‚ù§</span>.
            <a target="_blank"
               href="https://raw.githubusercontent.com/adanski/ax-comments/master/src/options/callbacks.ts"
               style="float:right">view raw</a>
        </div>

        <p class="configuration-options-linkable" id="formatters-options"><strong>Formatters</strong></p>

        <pre class="source-with-footer"><code class="language-typescript formatters">
            <!-- Dynamically replaced placeholder -->
            https://github.com/adanski/ax-comments/blob/master/src/options/formatters.ts
        </code></pre>
        <div class="source-footer">
            <a target="_blank" href="https://github.com/adanski/ax-comments/blob/master/src/options/callbacks.ts">src/options/callbacks.ts</a>
            delivered <span class="hide-in-phone">with ‚ù§</span>.
            <a target="_blank"
               href="https://raw.githubusercontent.com/adanski/ax-comments/master/src/options/callbacks.ts"
               style="float:right">view raw</a>
        </div>

        <p class="configuration-options-linkable" id="miscellaneous-options"><strong>Miscellaneous</strong></p>

        <pre class="source-with-footer"><code class="language-typescript misc">
            <!-- Dynamically replaced placeholder -->
            https://github.com/adanski/ax-comments/blob/master/src/options/misc.ts
        </code></pre>
        <div class="source-footer">
            <a target="_blank" href="https://github.com/adanski/ax-comments/blob/master/src/options/misc.ts">src/options/misc.ts</a>
            delivered <span class="hide-in-phone">with ‚ù§</span>.
            <a target="_blank" href="https://raw.githubusercontent.com/adanski/ax-comments/master/src/options/misc.ts"
               style="float:right">view raw</a>
        </div>

        <h3 id="attachments">
            <a class="anchor octicon" href="#attachments" aria-hidden="true">
                <object class="octicon-link" type="image/svg+xml" data="stylesheets/link.svg"></object>
            </a>
            Working with attachments
        </h3>
        <p>Saving attachments is a bit different from saving other fields of the comment as attachments cannot be
            presented in plain text unlike other fields; the attachments are sent to the API in binary format and the
            API returns the URL of the saved file instead of the original binary data due to performance reasons.
            <br>
            <br>
            The data should be provided to the API using <a
                    href="https://developer.mozilla.org/en-US/docs/Web/API/FormData" target="_blank">FormData</a>
            interface. Also please make sure that your API supports content type <code>multipart/form-data</code> to
            accept the binary files provided with the FormData. Unfortunately it's not possbile to provide hierarchical
            data structure with the FormData interface and thus the attachments must be sent to the API using a
            temporary field. The API must then get the files from that temporary field, save them to a file system and
            provide the URLs of those files in the <code>attachments</code> field.
            <br>
            <br>
            In the example below, the attachments are sent to the API in a field named
            <code>attachments_to_be_created</code>. The API is expected to process the files from that field and provide
            the URL of the saved attachments in the <code>attachments</code> field of the response. Please see <a
                    href="#example-data">Example data</a> for expected output.
        </p>

        <label class="example">EXAMPLE</label>
        <pre><code class="language-javascript">$('#comments-container').comments({
  postComment: function(commentJSON, success, error) {

    // Create form data and append all other fields but attachments
    var formData = new FormData();
    $(Object.keys(commentJSON)).each(function(index, key) {
      if(key != 'attachments') {
        var value = commentJSON[key];
        if(value) formData.append(key, value);
      }
    });

    // Append attachments to be created to the form data
    var attachmentsToBeCreated = commentJSON.attachments.filter(function(attachment){
      return !attachment.id
    });
    $(attachmentsToBeCreated).each(function(index, attachment) {
      formData.append('attachments_to_be_created', attachment.file);
    });

    // Save the comment together with the attachments
    $.ajax({
      type: 'post',
      url: '/api/comments/',
      data: formData,
      contentType: 'multipart/form-data',
      success: function(comment) {
        success(comment);
      },
      error: error
    });
  }
});</code></pre>

        <h3 id="browser-support">
            <a class="anchor octicon" href="#browser-support" aria-hidden="true">
                <object class="octicon-link" type="image/svg+xml" data="stylesheets/link.svg"></object>
            </a>
            Browser support
        </h3>

        <p>Basically every modern browser that supports native web components and shadow dom.</p>
        <p>Includes Firefox, Edge, Chrome and probably Safari</p>

        <h3 id="special-thanks">
            <a class="anchor octicon" href="#special-thanks" aria-hidden="true">
                <object class="octicon-link" type="image/svg+xml" data="stylesheets/link.svg"></object>
            </a>
            Special thanks
        </h3>

        <p>&lt;ax-comments&gt; probably wouldn't exist if it wasn't for the outstanding work of the authors of the following packages:</p>
        <ul>
            <li><a href="https://github.com/Viima/jquery-comments">jquery-comments</a></li>
            <li><a href="https://github.com/yuku/textcomplete">textcomplete</a></li>
            <li><a href="https://github.com/github/markdown-toolbar-element">markdown-toolbar-element</a></li>
        </ul>

        <h3 id="copyright-and-license">
            <a class="anchor octicon" href="#copyright-and-license" aria-hidden="true">
                <object class="octicon-link" type="image/svg+xml" data="stylesheets/link.svg"></object>
            </a>
            Copyright and license
        </h3>

        <p>Copyright 2017-2021 <a href="https://www.viima.com/">Viima Solutions Oy</a>.</p>
        <p>Copyright 2022 <a href="https://github.com/adanski/">adanski</a>.</p>
        <p>Released under <a href="https://github.com/adanski/ax-comments/blob/master/LICENSE">the MIT license</a>.</p>

        <footer class="site-footer">
            <span class="site-footer-owner"><a href="https://github.com/adanski/ax-comments">ax-comments</a> is maintained by <a
                    href="https://github.com/adanski">adanski</a>.</span>
        </footer>

    </main>

</section>
</body>
</html>
